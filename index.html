<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>ServletIO by zerh</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <style>
      #menu {
        height:215px;
      }
    
      #menu a{
        madding-bottom:0px
      }
    </style>
    
    <script>
      function showSubMenu(id, target){
        if(document.getElementById(id).style.display === 'block'){
          document.getElementById(target).innerHTML = '[+]';
          document.getElementById(id).style.display = 'none';
        } else if(document.getElementById(id).style.display === 'none') {
          document.getElementById(target).innerHTML = '[&ndash;]';
          document.getElementById(id).style.display = 'block';
        }
      }
      
    </script>
    
  </head>
  <body>
    <div class="wrapper">
      <header>
        
        <h1>ServletIO</h1>
        <h2>Convert your servlets to MVC controllers</h2>
        <ul>
          <li><a href="https://mega.nz/#!o88SBLJa!3q2mc0CumEdLePiG_G1Of0BGR_ric-cf3bbD1Ne8iwM">Download <strong>JAR File</strong></a></li>
          <li><a href="https://github.com/zerh/ServletIO">View on <strong>GitHub</strong></a></li>
          <li><a href="https://github.com/zerh/ServletIO/archive/master.zip">Download<strong>Zip File</strong></a></li>
        </ul>
        
        <hr />
        
        <div class="view" id="menu">
            <a href="#getting-started">Getting Started</a><br />
            <a href="#quick-installation">Quick Installation</a><br />
            <a href="#notes">Notes</a><br />
            <a href="#how-to-use">How to use</a> <a id="how-to-use-link" onclick="showSubMenu('how-to-use-submenu', 'how-to-use-link')" style="cursor:pointer">[+]</a><br />
              <div id="how-to-use-submenu" style="padding-left:20px; padding-top:0px; display:none;">
                <a href="#http-routing">HTTP Routing</a><br />
                <a href="#servlet-style-methods">Servlet style methods</a><br />
                <a href="#result-methods">Result methods</a><br />
                <a href="#filters">Filters</a><br />
              </div>
            <a href="#license">Lincense</a><br/>
        </div>
        
      </header>
      <section>
        <!--p><a href="#getting-started">Getting Started</a> | <a href="#quick-installation">Quick Installation</a> | <a href="#notes">Notes</a> | <a href="#documentation">Documentation</a> | <a href="#license">Lincense</a></p-->

<h2>
<a id="getting-started" class="anchor" href="#getting-started" aria-hidden="true"><span class="octicon octicon-link"></span></a>Getting Started</h2>

<p>Add <strong>"/*"</strong> to your mapped url, example: <code>@WebServlet("/your-path/*")</code>, and replace the super class <code>HttpServlet</code> by <code>ServletIO</code>.</p>

<div class="highlight highlight-java"><pre><span class="pl-k">import</span> <span class="pl-smi">javax.servlet.ServletException</span>;
<span class="pl-k">import</span> <span class="pl-smi">javax.servlet.annotation.WebServlet</span>;
<span class="pl-k">import</span> <span class="pl-smi">javax.servlet.http.HttpServletRequest</span>;
<span class="pl-k">import</span> <span class="pl-smi">javax.servlet.http.HttpServletResponse</span>;

<span class="pl-k">import</span> <span class="pl-smi">servletio.*</span>;
<span class="pl-k">import</span> <span class="pl-smi">servletio.annotation.Get</span>;

@WebServlet(<span class="pl-s"><span class="pl-pds">"</span>/base-path/*<span class="pl-pds">"</span></span>)
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">MyApp</span> <span class="pl-k">extends</span> <span class="pl-e">ServletIO</span> {

    <span class="pl-k">protected</span> <span class="pl-k">void</span> <span class="pl-en">doGet</span>(<span class="pl-smi">HttpServletRequest</span> <span class="pl-v">request</span>, <span class="pl-smi">HttpServletResponse</span> <span class="pl-v">response</span>) {
        <span class="pl-v">super</span><span class="pl-k">.</span>doGet(request, response);
        <span class="pl-c">//your old code</span>
    }

    <span class="pl-k">@Get</span>
    <span class="pl-k">public</span> <span class="pl-smi">Result</span> <span class="pl-en">hello</span>(<span class="pl-smi">Request</span> <span class="pl-v">req</span>){
        <span class="pl-k">return</span> respond(<span class="pl-s"><span class="pl-pds">"</span>&lt;h1&gt;hello world&lt;/h1&gt;<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>as(<span class="pl-s"><span class="pl-pds">"</span>text/html<span class="pl-pds">"</span></span>);
    }
}
</pre></div>

<p>Or put your old <code>doGet</code> code inside another method mapped with the base path:</p>

<div class="highlight highlight-java"><pre><span class="pl-k">import</span> <span class="pl-smi">javax.servlet.annotation.WebServlet</span>;

<span class="pl-k">import</span> <span class="pl-smi">servletio.*</span>;
<span class="pl-k">import</span> <span class="pl-smi">servletio.annotation.Get</span>;

@WebServlet(<span class="pl-s"><span class="pl-pds">"</span>/base-path/*<span class="pl-pds">"</span></span>)
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">MyApp</span> <span class="pl-k">extends</span> <span class="pl-e">ServletIO</span> {

    <span class="pl-k">@Get</span>(<span class="pl-s"><span class="pl-pds">"</span>/<span class="pl-pds">"</span></span>)
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">oldCode</span>(<span class="pl-smi">Request</span> <span class="pl-v">req</span>, <span class="pl-smi">Response</span> <span class="pl-v">res</span>){
        <span class="pl-smi">HttpServletRequest</span> request <span class="pl-k">=</span> req<span class="pl-k">.</span>raw;
        <span class="pl-smi">HttpServletResponse</span> response <span class="pl-k">=</span> res<span class="pl-k">.</span>raw;

        <span class="pl-c">//old code</span>
    }

    <span class="pl-k">@Get</span>
    <span class="pl-k">public</span> <span class="pl-smi">Result</span> <span class="pl-en">hello</span>(<span class="pl-smi">Request</span> <span class="pl-v">req</span>){
        <span class="pl-k">return</span> respond(<span class="pl-s"><span class="pl-pds">"</span>&lt;h1&gt;hello world&lt;/h1&gt;<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>as(<span class="pl-s"><span class="pl-pds">"</span>text/html<span class="pl-pds">"</span></span>);
    }
}</pre></div>

<hr>

<h2>
<a id="quick-installation" class="anchor" href="#quick-installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Quick installation</h2>

<h4>
<a id="add-repository" class="anchor" href="#add-repository" aria-hidden="true"><span class="octicon octicon-link"></span></a>Add repository:</h4>

<div class="highlight highlight-xml"><pre>&lt;<span class="pl-ent">repository</span>&gt;
    &lt;<span class="pl-ent">id</span>&gt;jitpack.io&lt;/<span class="pl-ent">id</span>&gt;
    &lt;<span class="pl-ent">url</span>&gt;https://jitpack.io&lt;/<span class="pl-ent">url</span>&gt;
&lt;/<span class="pl-ent">repository</span>&gt;</pre></div>

<h4>
<a id="add-dependency" class="anchor" href="#add-dependency" aria-hidden="true"><span class="octicon octicon-link"></span></a>Add dependency:</h4>

<div class="highlight highlight-xml"><pre>&lt;<span class="pl-ent">dependency</span>&gt;
    &lt;<span class="pl-ent">groupId</span>&gt;com.github.zerh&lt;/<span class="pl-ent">groupId</span>&gt;
    &lt;<span class="pl-ent">artifactId</span>&gt;ServletIO&lt;/<span class="pl-ent">artifactId</span>&gt;
    &lt;<span class="pl-ent">version</span>&gt;eb986730b6&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</pre></div>

<hr>

<h2>
<a id="notes" class="anchor" href="#notes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Notes</h2>

<p><em>Supported since Servlet</em> <strong>3.0.1</strong> <em>or higher, and Java</em> <strong>6</strong> <em>or higher</em></p>

<hr>

<h2>
<a id="how-to-use" class="anchor" href="#how-to-use" aria-hidden="true"><span class="octicon octicon-link"></span></a>How to use</h2>

<h3>
<a id="http-routing" class="anchor" href="#http-routing" aria-hidden="true"><span class="octicon octicon-link"></span></a>HTTP routing</h3>

<p>The path reference to a method is the method name, but also could be a specified path in the annotation params <code>@Get</code>, <code>@Post</code>, <code>@Put</code>, <code>@Delete</code>, <code>@Options</code></p>

<p>The parameters could be mapped as pretty url using <strong>":"</strong> before the url parameter as below:</p>

<div class="highlight highlight-java"><pre><span class="pl-k">import</span> <span class="pl-smi">javax.servlet.annotation.WebServlet</span>;

<span class="pl-k">import</span> <span class="pl-smi">servletio.*</span>;
<span class="pl-k">import</span> <span class="pl-smi">servletio.annotation.*</span>;

@WebServlet(<span class="pl-s"><span class="pl-pds">"</span>/base-path/*<span class="pl-pds">"</span></span>)
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">MyApp</span> <span class="pl-k">extends</span> <span class="pl-e">ServletIO</span> {

    <span class="pl-k">@Get</span>(<span class="pl-s"><span class="pl-pds">"</span>/edit/:id<span class="pl-pds">"</span></span>)
    <span class="pl-k">public</span> <span class="pl-smi">Result</span> <span class="pl-en">edit</span>(<span class="pl-smi">Request</span> <span class="pl-v">req</span>){
        <span class="pl-k">return</span> respond(<span class="pl-s"><span class="pl-pds">"</span>&lt;h1&gt;the url has: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> req<span class="pl-k">.</span>param(<span class="pl-s"><span class="pl-pds">"</span>:id<span class="pl-pds">"</span></span>) <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>&lt;/h1&gt;<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>as(<span class="pl-s"><span class="pl-pds">"</span>text/html<span class="pl-pds">"</span></span>);
    }
}</pre></div>

<hr>

<h3>
<a id="servlet-style-methods" class="anchor" href="#servlet-style-methods" aria-hidden="true"><span class="octicon octicon-link"></span></a>Servlet Style Methods</h3>

<p>A Servlet style method is a Java method that receive a <code>servletio.Request</code> and a <code>servletio.Response</code> parameters as below:</p>

<div class="highlight highlight-java"><pre><span class="pl-k">import</span> <span class="pl-smi">javax.servlet.annotation.WebServlet</span>;

<span class="pl-k">import</span> <span class="pl-smi">servletio.*</span>;
<span class="pl-k">import</span> <span class="pl-smi">servletio.annotation.*</span>;

@WebServlet(<span class="pl-s"><span class="pl-pds">"</span>/base-path/*<span class="pl-pds">"</span></span>)
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">MyApp</span> <span class="pl-k">extends</span> <span class="pl-e">ServletIO</span> {

    <span class="pl-k">@Get</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">hello</span>(<span class="pl-smi">Request</span> <span class="pl-v">req</span>, <span class="pl-smi">Response</span> <span class="pl-v">res</span>){
        res<span class="pl-k">.</span>printHtml(<span class="pl-s"><span class="pl-pds">"</span>&lt;h1&gt;hellow world&lt;/h1&gt;<span class="pl-pds">"</span></span>);
    }
}</pre></div>

<p>You can either use <code>Request</code> or <code>Response</code> only as method parameters. This classes wrap HttpServletRequest and HttpServletResponse and offer some facilities. The most prominents are:</p>

<h5>
<a id="request" class="anchor" href="#request" aria-hidden="true"><span class="octicon octicon-link"></span></a>Request</h5>

<ul>
<li>
<code>request.bindParam(MyBean.class)</code> return a instance of <code>MyBean</code> with all values of HTML form, mapping by bean properties names.</li>
<li>
<code>request.getFile(String paramName)</code> return a File with the uploaded file reference.</li>
<li>
<code>request.dispatcher(String dispatcherName)</code> return an instance of <code>servletio.Dispatcher</code>, wrap of <code>RequestDispatcher</code>.</li>
<li>
<code>request.raw</code> final propierty with <code>HttpServletRequest</code> object reference of the current request.</li>
</ul>

<h5>
<a id="response" class="anchor" href="#response" aria-hidden="true"><span class="octicon octicon-link"></span></a>Response</h5>

<ul>
<li>
<code>response.print(String htmlString, String contentType)</code>.</li>
<li>
<code>response.print(String text)</code> print text plain.</li>
<li>
<code>response.printHtml(String htmlString)</code> print text with HTML content type.</li>
<li>
<code>response.printXml(String xmlString)</code> print text with XML content type.</li>
<li>
<code>response.printJson(String xmlString)</code> print text with JSON content type.</li>
<li>
<code>response.redirect(String location)</code> redirect to the specified location.</li>
<li>
<code>response.redirect(String location, int httpStatusCode)</code> redirect to the specified location with status code.</li>
<li>
<code>response.sendError(int error)</code> send custom error code to the browser.</li>
<li>
<code>response.sendBadRequest()</code> sen 400 error code to the browser.</li>
<li>
<code>response.sendInternalServerError()</code> send 500 error code to the browser.</li>
<li>
<code>response.raw</code> final propierty with <code>HttpServletResponse</code> object reference of the current request</li>
</ul>

<hr>

<h3>
<a id="result-methods" class="anchor" href="#result-methods" aria-hidden="true"><span class="octicon octicon-link"></span></a>Result methods</h3>

<p><code>Result</code> is just an elegant way to declare controllers methods. The <code>Result</code> object wraps with <code>ServletIO</code> the methods printers of the <code>Response</code> object, to produce standard HTTP results. </p>

<div class="highlight highlight-java"><pre><span class="pl-k">import</span> <span class="pl-smi">javax.servlet.annotation.WebServlet</span>;

<span class="pl-k">import</span> <span class="pl-smi">servletio.*</span>;
<span class="pl-k">import</span> <span class="pl-smi">servletio.annotation.*</span>;

@WebServlet(<span class="pl-s"><span class="pl-pds">"</span>/base-path/*<span class="pl-pds">"</span></span>)
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">MyApp</span> <span class="pl-k">extends</span> <span class="pl-e">ServletIO</span> {

    <span class="pl-k">@Get</span>
    <span class="pl-k">public</span> <span class="pl-smi">Result</span> <span class="pl-en">hello</span>(<span class="pl-smi">Request</span> <span class="pl-v">req</span>){
        <span class="pl-k">return</span> respond(<span class="pl-s"><span class="pl-pds">"</span>content<span class="pl-pds">"</span></span>);
    }
}</pre></div>

<p>The object Result has methods <code>asHtml()</code>, <code>asJson()</code>, <code>as(String contentType)</code>, <code>withCookies(Cookies... cookies)</code>, <code>withDiscardingCookies(Cookies... cookies)</code> and others helpers methods that returns the same instance of the <code>Result</code> object like the next example:</p>

<div class="highlight highlight-java"><pre><span class="pl-k">import</span> <span class="pl-smi">javax.servlet.annotation.WebServlet</span>;

<span class="pl-k">import</span> <span class="pl-smi">servletio.*</span>;
<span class="pl-k">import</span> <span class="pl-smi">servletio.annotation.*</span>;

@WebServlet(<span class="pl-s"><span class="pl-pds">"</span>/base-path/*<span class="pl-pds">"</span></span>)
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">MyApp</span> <span class="pl-k">extends</span> <span class="pl-e">ServletIO</span> {

    <span class="pl-k">@Get</span>
    <span class="pl-k">public</span> <span class="pl-smi">Result</span> <span class="pl-en">hello</span>(<span class="pl-smi">Request</span> <span class="pl-v">req</span>){
        <span class="pl-k">return</span> respond(<span class="pl-s"><span class="pl-pds">"</span>&lt;h1&gt;content&lt;/h1&gt;<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>asHtml();
    }
}</pre></div>

<p>ServletIO contains some helper in addition to <code>respond(String content)</code> method, that return objects Result:</p>

<ul>
<li>
<code>internalServerError(String content)</code> returns HTTP results with the 500 code.</li>
<li>
<code>sendFile(InputStream inputStream)</code> send file to client.</li>
<li>
<code>badRequest(String optionalContent)</code>returns HTTP results with the 400 code.</li>
<li>
<code>notFound(String optionalContent)</code> returns HTTP results with the 404 code.</li>
<li>
<code>redirect(String target)</code> redirect to the target.</li>
<li>
<code>temporaryRedirect(String target)</code> redirect to the target with 303 code</li>
</ul>

<hr>

<h3>
<a id="filters" class="anchor" href="#filters" aria-hidden="true"><span class="octicon octicon-link"></span></a>Filters</h3>

<p>Methods annotated with the <code>@Before</code> annotation are executed before each action call for <code>ServletIO</code>, and methods annotated with the <code>@After</code> annotation are executed after each action call for the Servlet:</p>

<div class="highlight highlight-java"><pre><span class="pl-k">import</span> <span class="pl-smi">javax.servlet.annotation.WebServlet</span>;

<span class="pl-k">import</span> <span class="pl-smi">servletio.*</span>;
<span class="pl-k">import</span> <span class="pl-smi">servletio.annotation.*</span>;

@WebServlet(<span class="pl-s"><span class="pl-pds">"</span>/base-path/*<span class="pl-pds">"</span></span>)
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">MyApp</span> <span class="pl-k">extends</span> <span class="pl-e">ServletIO</span> {

    <span class="pl-k">@Get</span>
    <span class="pl-k">public</span> <span class="pl-smi">Result</span> <span class="pl-en">index</span>(<span class="pl-smi">Request</span> <span class="pl-v">req</span>){
        <span class="pl-k">return</span> respond(<span class="pl-s"><span class="pl-pds">"</span>&lt;h1&gt;hello world&lt;/h1&gt;<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>as(<span class="pl-s"><span class="pl-pds">"</span>text/html<span class="pl-pds">"</span></span>);
    }

    <span class="pl-k">@Before</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">validateUser</span>(<span class="pl-smi">Request</span> <span class="pl-v">req</span>, <span class="pl-smi">Response</span> <span class="pl-v">res</span>){
        <span class="pl-k">if</span>(req<span class="pl-k">.</span>session()<span class="pl-k">.</span>attribute(<span class="pl-s"><span class="pl-pds">"</span>user<span class="pl-pds">"</span></span>)<span class="pl-k">==</span><span class="pl-c1">null</span>)
            res<span class="pl-k">.</span>printHtml(<span class="pl-s"><span class="pl-pds">"</span>bye bye!!<span class="pl-pds">"</span></span>);
    }

    <span class="pl-k">@After</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">log</span>(<span class="pl-smi">Request</span> <span class="pl-v">req</span>, <span class="pl-smi">Response</span> <span class="pl-v">res</span>){
        <span class="pl-smi">System</span><span class="pl-k">.</span>out<span class="pl-k">.</span>println(<span class="pl-s"><span class="pl-pds">"</span>Action executed...<span class="pl-pds">"</span></span>);
    }

    <span class="pl-k">@After</span>
    <span class="pl-k">public</span> <span class="pl-smi">Result</span> <span class="pl-en">onNotFound</span>(<span class="pl-smi">Request</span> <span class="pl-v">req</span>){
        <span class="pl-k">if</span>(<span class="pl-k">!</span>isMapped(req))
            <span class="pl-k">return</span> notFound(<span class="pl-s"><span class="pl-pds">"</span>&lt;h1&gt;404, not found&lt;/h1&gt;<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>as(<span class="pl-s"><span class="pl-pds">"</span>text/html<span class="pl-pds">"</span></span>);

        <span class="pl-k">return</span> <span class="pl-c1">null</span>;
    }

}</pre></div>

<p>If you don’t want the <code>@Before</code> or <code>@After</code> methods to intercept all request, you can specify a list of actions using <code>only</code> param:</p>

<div class="highlight highlight-java"><pre><span class="pl-k">import</span> <span class="pl-smi">javax.servlet.annotation.WebServlet</span>;

<span class="pl-k">import</span> <span class="pl-smi">servletio.*</span>;
<span class="pl-k">import</span> <span class="pl-smi">servletio.annotation.*</span>;

@WebServlet(<span class="pl-s"><span class="pl-pds">"</span>/base-path/*<span class="pl-pds">"</span></span>)
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">MyApp</span> <span class="pl-k">extends</span> <span class="pl-e">ServletIO</span> {

    <span class="pl-k">@Get</span>
    <span class="pl-k">public</span> <span class="pl-smi">Result</span> <span class="pl-en">login</span>(<span class="pl-smi">Request</span> <span class="pl-v">req</span>){
        <span class="pl-k">return</span> respond(<span class="pl-s"><span class="pl-pds">"</span>&lt;h1&gt;login&lt;/h1&gt;<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>as(<span class="pl-s"><span class="pl-pds">"</span>text/html<span class="pl-pds">"</span></span>);
    }

    <span class="pl-k">@Before</span>(<span class="pl-c1">only</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>/admin<span class="pl-pds">"</span></span>)
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">validateUser</span>(<span class="pl-smi">Request</span> <span class="pl-v">req</span>, <span class="pl-smi">Response</span> <span class="pl-v">res</span>){
        <span class="pl-k">if</span>(req<span class="pl-k">.</span>session()<span class="pl-k">.</span>attribute(<span class="pl-s"><span class="pl-pds">"</span>user<span class="pl-pds">"</span></span>)<span class="pl-k">==</span><span class="pl-c1">null</span>)  
            res<span class="pl-k">.</span>redirect(<span class="pl-s"><span class="pl-pds">"</span>login<span class="pl-pds">"</span></span>);
    }

    <span class="pl-k">@After</span>(<span class="pl-c1">only</span><span class="pl-k">=</span>{<span class="pl-s"><span class="pl-pds">"</span>/login<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>/logout<span class="pl-pds">"</span></span>})
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">log</span>(<span class="pl-smi">Request</span> <span class="pl-v">req</span>, <span class="pl-smi">Response</span> <span class="pl-v">res</span>){
        <span class="pl-smi">System</span><span class="pl-k">.</span>out<span class="pl-k">.</span>prinln(<span class="pl-s"><span class="pl-pds">"</span>/login or /logout executed<span class="pl-pds">"</span></span>)
    }

    <span class="pl-c1">...</span>
}</pre></div>

<p>Or you can specify a list of actions to exclude for <code>@After</code> or <code>@Before</code> using the <code>unless</code> param:</p>

<div class="highlight highlight-java"><pre><span class="pl-k">import</span> <span class="pl-smi">javax.servlet.annotation.WebServlet</span>;

<span class="pl-k">import</span> <span class="pl-smi">servletio.*</span>;
<span class="pl-k">import</span> <span class="pl-smi">servletio.annotation.*</span>;

@WebServlet(<span class="pl-s"><span class="pl-pds">"</span>/base-path/*<span class="pl-pds">"</span></span>)
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">MyApp</span> <span class="pl-k">extends</span> <span class="pl-e">ServletIO</span> {

    <span class="pl-k">@Before</span>(<span class="pl-c1">unless</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>/login<span class="pl-pds">"</span></span>)
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">validateUser</span>(<span class="pl-smi">Request</span> <span class="pl-v">req</span>, <span class="pl-smi">Response</span> <span class="pl-v">res</span>){
        <span class="pl-k">if</span>(req<span class="pl-k">.</span>session()<span class="pl-k">.</span>attribute(<span class="pl-s"><span class="pl-pds">"</span>user<span class="pl-pds">"</span></span>)<span class="pl-k">==</span><span class="pl-c1">null</span>)
            req<span class="pl-k">.</span>dispatcher(<span class="pl-s"><span class="pl-pds">"</span>login<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>forward(req, res);
    }
    <span class="pl-c1">...</span>
}</pre></div>

<p>You can set execution priority of <code>@Before</code> or <code>@After</code> methods using <code>priority</code> param, example <code>@Before(priority=1)</code>, by default priority is 0 (executed first):</p>

<div class="highlight highlight-java"><pre><span class="pl-k">import</span> <span class="pl-smi">javax.servlet.annotation.WebServlet</span>;

<span class="pl-k">import</span> <span class="pl-smi">servletio.*</span>;
<span class="pl-k">import</span> <span class="pl-smi">servletio.annotation.*</span>;

@WebServlet(<span class="pl-s"><span class="pl-pds">"</span>/base-path/*<span class="pl-pds">"</span></span>)
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">MyApp</span> <span class="pl-k">extends</span> <span class="pl-e">ServletIO</span> {

    <span class="pl-k">@Before</span>(<span class="pl-c1">only</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>/admin/something<span class="pl-pds">"</span></span>, <span class="pl-c1">priority</span><span class="pl-k">=</span><span class="pl-c1">2</span>)
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">adminSomething</span>(<span class="pl-smi">Request</span> <span class="pl-v">req</span>, <span class="pl-smi">Response</span> <span class="pl-v">res</span>){
        <span class="pl-c">//some filter for this action</span>
    }

    <span class="pl-k">@Before</span>(<span class="pl-c1">only</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>/admin/*<span class="pl-pds">"</span></span>, <span class="pl-c1">priority</span><span class="pl-k">=</span><span class="pl-c1">1</span>)
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">validateUser</span>(<span class="pl-smi">Request</span> <span class="pl-v">req</span>, <span class="pl-smi">Response</span> <span class="pl-v">res</span>){
        <span class="pl-k">if</span>(req<span class="pl-k">.</span>session()<span class="pl-k">.</span>attribute(<span class="pl-s"><span class="pl-pds">"</span>user<span class="pl-pds">"</span></span>)<span class="pl-k">==</span><span class="pl-c1">null</span>)
            res<span class="pl-k">.</span>redirect(<span class="pl-s"><span class="pl-pds">"</span>login<span class="pl-pds">"</span></span>);
    }
    <span class="pl-c1">...</span>
}</pre></div>

<hr>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h2>

<p>Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at <a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/zerh">zerh</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
